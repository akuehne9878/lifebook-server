<mvc:View xmlns:mvc="sap.ui.core.mvc" xmlns="sap.m" xmlns:codeeditor="sap.ui.codeeditor" xmlns:core="sap.ui.core" xmlns:grid="sap.ui.layout.cssgrid" xmlns:f="sap.f" xmlns:layout="sap.ui.layout" xmlns:uxap="sap.uxap" controllerName="lifebook.view.main.detail.Detail" xmlns:html="http://www.w3.org/1999/xhtml" height="100%">
   <Page enableScrolling="false" showHeader="false">
      <content>
         <List showSeparators="None">
            <CustomListItem >
               <Panel expandable="false" expanded="true" width="auto" class="sapUiResponsiveMargin">
                  <content>
                     <VBox height="100%" renderType="Bare">
                        <Title titleStyle="H3"  text="{currPage>/title}" />
                        <VBox height="100%" >
                           <codeeditor:CodeEditor height="200px" width="100%" type="markdown" visible="{toolbar>/savePage}" value="{currPage>/content}" liveChange="onLiveChange"/>
                        </VBox>
                        <VBox width="100%" visible="{=${toolbar>/savePage} ? false : true}" height="100%" renderType="Bare">
                           <html:div renderType="Bare" id="htmlViewer" class="markdown-body sapUiSmallMargin"/>
                        </VBox>
                        <List items="{currPage>/children}" visible="{= ${currPage>/children}.length > 0 }" >
                           <StandardListItem title="{currPage>name}" type="Navigation" press="onNavigateToChildPage" />
                        </List>
                     </VBox>
                  </content>
               </Panel>
            </CustomListItem>
            <CustomListItem>
               <Panel expandable="true" expanded="true" width="auto" class="sapUiResponsiveMargin" visible="{= ${currPage>/files}.length > 0 }">
                  <headerToolbar>
                     <OverflowToolbar height="3rem" style="Clear">
                        <Title text="Attachments"/>
                     </OverflowToolbar>
                  </headerToolbar>
                  <content>
                     <f:GridList id="gridList" showUnread="true" items="{path: 'currPage>/files'}" selectionChange="onSelectionChange" growing="true" growingThreshold="25" mode="MultiSelect">
                        <f:customLayout>
                           <grid:GridBasicLayout gridTemplateColumns="repeat(auto-fit, minmax(300px, 0fr))" gridGap="1rem"/>
                        </f:customLayout>
                        <f:GridListItem type="Active" selected="{currPage>selected}" unread="{currPage>selected}" class="noBorderBottom noContentPadding" press="onPress">
                           <VBox height="100%" >
                              <HBox class="">
                                 <OverflowToolbar class="noBorderBottom noPaddingLeft">
                                    <Checkbox selected="{currPage>selected}" select="onSelectionChange"/>
                                    <Label text="{currPage>name}"/>
                                 </OverflowToolbar>
                              </HBox>
                              <HBox height="100%" class="sapUiSmallMargin" alignItems="Center" visible="{= ${currPage>type} !== 'JPG' }">
                                 <VBox>
                                    <Label text="{currPage>date}" wrapping="true"/>
                                 </VBox>
                              </HBox>
                              <Image src="{currPage>thumbnail}" width="100%" visible="{= ${currPage>type} === 'JPG' }"/>
                           </VBox>
                        </f:GridListItem>
                     </f:GridList>
                  </content>
               </Panel>
            </CustomListItem>
         </List>
      </content>
   </Page>
</mvc:View>